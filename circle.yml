version: 2
jobs :
  build:
    machine: true
    working_directory: ~/guitarrapc.github.io
    steps:
      - checkout

  deploy:
    docker:
      - image: jnyo/docker-hugo-firebase:latest
    working_directory: ~/project
    steps:
      - run:
          branch: dev
          command: ./scripts/deploy.sh

workflows:
   version: 2
   build_and_deploy:
      jobs:
        - build
        - deploy:
            requires:
              - build
            filters:
              branches:
                only: dev


# general:
#   branches:
#     only:
#      - source

# dependencies:
#   pre:
#   - wget https://github.com/gohugoio/hugo/releases/download/v0.37/hugo_0.37_Linux-64bit.deb
#   - sudo dpkg -i hugo_0.37_Linux-64bit.deb

# test:
#   override:
#     - "true"

# deployment:
#   production:
#     branch: source
#     commands:
#     - ./scripts/deploy.sh
